- name: Get latest RHEL 8 AMI
  amazon.aws.ec2_ami_info:
    owners:
      - amazon
    region: '{{ awsRegion }}'
    filters:
      name: RHEL-8*
      architecture: x86_64
      virtualization-type: hvm
  register: amis
  tags: [ rhel8, amd]

- name: Get latest RHEL 9 AMI
  amazon.aws.ec2_ami_info:
    owners:
      - amazon
    region: '{{ awsRegion }}'
    filters:
      name: RHEL-9.5*
      architecture: x86_64
      virtualization-type: hvm
  register: amis
  tags: [ rhel9, amd]

- name: Get latest RHEL 9 ARM AMI
  amazon.aws.ec2_ami_info:
    owners:
      - amazon
    region: '{{ awsRegion }}'
    filters:
      name: RHEL-9.5*
      architecture: arm64
      virtualization-type: hvm
  register: amis
  tags: [ rhel9, arm]