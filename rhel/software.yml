- name: Install EPEL 8 key 
  rpm_key:
    state: present
    key: https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-8
  tags: rhel<=8

- name: Install EPEL 8
  dnf:
    name: 'https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm'
    state: present
  tags: rhel<=8

- name: Install EPEL 9 key 
  rpm_key:
    state: present
    key: https://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-9
  tags: rhel>=9

- name: Install EPEL 9
  dnf:
    name: 'https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm'
    state: present
  tags: rhel>=9

- name: Package installation
  dnf:
    name:
      - '@Development tools'
      - libnsl
      - podman
      - buildah
      - unixODBC
      - wget
      - curl
      - cronie
      - dos2unix
      - java-11-openjdk
      - htop
      - libstdc++.i686
      - libxcrypt.i686
      - ncurses-libs-6.1-9.20180224.el8.i686
      - libaio-devel
      - glibc.i686
      - zlib-1.2.11-18.el8_5.i686
      - tcpdump
      - ed
      - glibc-devel.i686
      - tmux
      - openconnect
    state: present
  tags: default

- name: rhel<=8 Package installation
  dnf:
    name: spax
    state: present
  tags: rhel<=8