- name: Get EDVS2022 8.0 Download URL from S3
  amazon.aws.s3_object:
    profile: '{{ awsProfile }}'
    bucket: mturner
    mode: geturl
    object: ED/80/edvs2022_80.exe
    region: '{{ awsRegion }}'
    expiry: 4000
    sig_v4: true
  register: s3
  delegate_to: localhost
  tags: ed80

- name: Download EDVS2022 8.0 Installer
  ansible.windows.win_get_url:
    url: '{{ s3.url }}'
    dest: C:\temp\
  tags: ed80

- name: Install EDVS2022 8.0
  win_package:
    path: C:\temp\edvs2022_80.exe
    state: present
    arguments: /passive RumbaCheckbox=1 /log C:\temp\edvs2022_80.log
  tags: ed80

- name: Get EDE 8.0 Download URL from S3
  amazon.aws.s3_object:
    profile: '{{ awsProfile }}'
    bucket: mturner
    mode: geturl
    object: ED/80/ede_80.exe
    region: '{{ awsRegion }}'
    expiry: 4000
    sig_v4: true
  register: s3
  delegate_to: localhost
  tags: ed80

- name: Download EDE 8.0 Installer
  ansible.windows.win_get_url:
    url: '{{ s3.url }}'
    dest: C:\temp\
  tags: ed80

- name: Install EDE 8.0
  win_package:
    path: C:\temp\ede_80.exe
    state: present
    arguments: /passive RumbaCheckbox=1 /log C:\temp\ede_80.log
  tags: ed80

# PU5

- name: Get EDVS2022 8.0 PU 5 Download URL from S3
  amazon.aws.s3_object:
    profile: '{{ awsProfile }}'
    bucket: mturner
    mode: geturl
    object: ED/80/edvs2022_80_pu05_318648.exe
    region: '{{ awsRegion }}'
    expiry: 4000
    sig_v4: true
  register: s3
  delegate_to: localhost
  tags: ed80pu5

- name: Download EDVS2022 8.0 PU 5 Installer
  ansible.windows.win_get_url:
    url: '{{ s3.url }}'
    dest: C:\temp\
  tags: ed80pu5

- name: Install EDVS2022 8.0 PU 5
  win_package:
    path: C:\temp\edvs2022_80_pu05_318648.exe
    state: present
    arguments: /passive RumbaCheckbox=1 /log C:\temp\edvs2022_80_pu5.log
  tags: ed80pu5

- name: Get EDE 8.0 PU 5 Download URL from S3
  amazon.aws.s3_object:
    profile: '{{ awsProfile }}'
    bucket: mturner
    mode: geturl
    object: ED/80/ede_80_pu05_318643.exe
    region: '{{ awsRegion }}'
    expiry: 4000
    sig_v4: true
  register: s3
  delegate_to: localhost
  tags: ed80pu5

- name: Download EDE 8.0 PU 5 Installer
  ansible.windows.win_get_url:
    url: '{{ s3.url }}'
    dest: C:\temp\
  tags: ed80pu5

- name: Install EDE 8.0 PU 5
  win_package:
    path: C:\temp\ede_80_pu05_318643.exe
    state: present
    arguments: /passive RumbaCheckbox=1 /log C:\temp\ede_80_pu5.log
  tags: ed80pu5

# PU6

- name: Get EDVS2022 8.0 PU 6 Download URL from S3
  amazon.aws.s3_object:
    profile: '{{ awsProfile }}'
    bucket: mturner
    mode: geturl
    object: ED/80/edvs2022_80_pu06_321069.exe
    region: '{{ awsRegion }}'
    expiry: 4000
    sig_v4: true
  register: s3
  delegate_to: localhost
  tags: ed80pu6

- name: Download EDVS2022 8.0 PU 6 Installer
  ansible.windows.win_get_url:
    url: '{{ s3.url }}'
    dest: C:\temp\
  tags: ed80pu6

- name: Install EDVS2022 8.0 PU 6
  win_package:
    path: C:\temp\edvs2022_80_pu06_321069.exe
    state: present
    arguments: /passive RumbaCheckbox=1 /log C:\temp\edvs2022_80_pu6.log
  tags: ed80pu6

- name: Get EDE 8.0 PU 6 Download URL from S3
  amazon.aws.s3_object:
    profile: '{{ awsProfile }}'
    bucket: mturner
    mode: geturl
    object: ED/80/ede_80_pu06_321065.exe
    region: '{{ awsRegion }}'
    expiry: 4000
    sig_v4: true
  register: s3
  delegate_to: localhost
  tags: ed80pu6

- name: Download EDE 8.0 PU 6 Installer
  ansible.windows.win_get_url:
    url: '{{ s3.url }}'
    dest: C:\temp\
  tags: ed80pu6

- name: Install EDE 8.0 PU 6
  win_package:
    path: C:\temp\ede_80_pu06_321065.exe
    state: present
    arguments: /passive RumbaCheckbox=1 /log C:\temp\ede_80_pu6.log
  tags: ed80pu6